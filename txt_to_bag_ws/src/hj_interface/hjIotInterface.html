<!DOCTYPE html><html><head>
      <title>hjIotInterface</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:////home/panlou/.vscode/extensions/shd101wyy.markdown-preview-enhanced-0.8.13/crossnote/dependencies/katex/katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<h3 id="iot-通信模块">Iot 通信模块 </h3>
<h4 id="shadow">Shadow </h4>
<p>影子(Shadow)是亚马逊云服务(AWS)提供的一种通信服务，其本质也是一种MQTT通信协议。</p>
<p>影子为设备、应用程序和其它云服务提供可靠的数据存储以共享数据。它们允许设备、应用程序和其它云服务连接和断开连接，而不会丢失设备的状态。</p>
<p>当设备、应用程序和其他云服务连接到时 AWS IoT，它们可以通过设备的阴影访问和控制设备的当前状态。例如，应用程序可以通过更新影子来请求更改设备的状态。 AWS IoT 发布一条消息，指明对设备的更改。设备接收该消息，更新其状态以保持匹配，然后发布一条消息以指示其更新状态。Device Shadow 服务在相应的影子中反映该更新状态。应用程序可以订阅影子的更新，也可以查询影子以获取其当前状态。</p>
<p>当设备离线时，应用程序仍然可以 AWS IoT 与设备的影子进行通信。在设备重新连接时，它接收其影子的当前状态，以便它可以更新其状态以与其影子的状态匹配，然后发布一条消息以指示其更新状态。同样，如果应用程序脱机并且设备状态在其脱机时发生变化，则设备将影子保持更新状态，以便应用程序可以在设备重新连接时查询影子以获取其当前状态。</p>
<p>影子状态记录就是在Amazon云端维护一份json document, 设备离线期间app可以通过读取shadow doc来更新状态。</p>
<p><a href="https://docs.aws.amazon.com/zh_cn/iot/latest/developerguide/iot-device-shadows.html">Aws shadow 服务介绍</a></p>
<p><a href="https://docs.aws.amazon.com/zh_cn/iot/latest/developerguide/device-shadow-document.html">Aws shadow document</a></p>
<h4 id="模块集成">模块集成 </h4>
<p class="plantuml"><!--?xml version="1.0" encoding="us-ascii" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="381px" preserveAspectRatio="none" style="width:989px;height:381px;background:#FFFFFF;" version="1.1" viewBox="0 0 989 381" width="989px" zoomAndPan="magnify"><defs><filter height="300%" id="fbav0aiq6575y" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"></feGaussianBlur><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></feColorMatrix><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"></feOffset><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"></feBlend></filter></defs><g><!--cluster middleware_node--><g id="cluster_middleware_node"><polygon fill="none" filter="url(#fbav0aiq6575y)" points="16,49.5659,26,39.5659,338,39.5659,338,155.5659,328,165.5659,16,165.5659,16,49.5659" style="stroke:#000000;stroke-width:1.5;"></polygon><line style="stroke:#000000;stroke-width:1.5;" x1="328" x2="338" y1="49.5659" y2="39.5659"></line><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="328" y1="49.5659" y2="49.5659"></line><line style="stroke:#000000;stroke-width:1.5;" x1="328" x2="328" y1="49.5659" y2="165.5659"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="139" x="103.5" y="65.561">middleware_node</text></g><!--cluster collect_node--><g id="cluster_collect_node"><polygon fill="none" filter="url(#fbav0aiq6575y)" points="362,49.5659,372,39.5659,700,39.5659,700,354.5659,690,364.5659,362,364.5659,362,49.5659" style="stroke:#000000;stroke-width:1.5;"></polygon><line style="stroke:#000000;stroke-width:1.5;" x1="690" x2="700" y1="49.5659" y2="39.5659"></line><line style="stroke:#000000;stroke-width:1.5;" x1="362" x2="690" y1="49.5659" y2="49.5659"></line><line style="stroke:#000000;stroke-width:1.5;" x1="690" x2="690" y1="49.5659" y2="364.5659"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="99" x="477.5" y="65.561">collect_node</text></g><!--cluster AwsConn--><g id="cluster_AwsConn"><path d="M401.1373,233.2746 C406.5878,223.7273 414.246,222.9974 420.6924,232.2381 C424.7574,223.5666 432.651,220.7061 439.5752,229.0686 C445.8785,220.1335 452.3879,221.9095 457.1134,230.6354 C462.164,221.3025 468.7065,220.1865 476.6981,227.0873 C482.0816,218.0479 488.9664,217.875 495.9961,225.1387 C501.7847,216.423 507.2021,218.1678 512.9585,225.1735 C518.0524,213.4659 526.3715,212.4056 533.691,223.1152 C538.7836,212.5886 546.8502,212.9357 553.0387,222.0347 C559.928,215.5944 565.6523,216.8375 569.174,225.6073 C575.445,216.4901 583.9498,218.56 588.7992,227.1802 C595.4815,218.1198 602.7112,220.0142 607.1134,229.4392 C614.6766,221.439 621.4298,222.0595 626.0256,232.4849 C629.665,224.3149 637.7487,224.136 642.6895,231.047 C653.9367,221.1023 664.4254,226.7147 668,239.5659 C669.5475,238.8483 670.7795,239.7116 670.7441,241.3836 C681.1706,246.098 682.6428,252.4187 676.1296,261.6373 C687.0795,265.5734 690.5226,274.6508 682.0354,283.7728 C690.3517,294.1468 687.4028,300.8674 675.8024,305.5376 C682.7924,321.3918 677.6792,329.6745 661,332.5659 C662.5192,331.4443 663.8456,332.1834 663.8499,334.0236 C658.317,342.3744 651.2306,343.6112 645.1119,334.6579 C640.3359,344.6033 631.5658,345.4166 625.9722,335.4435 C620.7084,344.4675 612.4366,343.1015 607.1758,335.4402 C601.42,342.2476 595.0996,342.6695 589.9021,334.7839 C584.9099,345.6252 574.4105,345.7624 568.7811,335.4193 C565.381,343.6531 557.4267,343.9821 552.2917,337.3429 C546.3085,345.0355 540.1235,347.6268 533.6157,337.9055 C527.1263,345.107 518.9664,345.9817 514.2214,335.9432 C509.7301,344.4783 502.2546,345.4267 497.0732,336.626 C489.3724,346.7318 482.5466,347.1476 475.5448,335.9207 C470.5855,342.5951 463.2188,343.7706 459.4122,334.7369 C453.7542,345.0666 445.5697,345.4199 439.4945,335.1402 C434.3053,343.9498 427.72,343.1596 421.8663,335.8676 C409.0065,345.8473 397.6837,340.4079 394,325.5659 C395.3174,326.4395 395.4745,327.6733 394.041,328.5842 C382.2858,324.4166 380.6709,313.5076 389.7613,305.4789 C379.9327,301.7981 377.8184,292.1799 386.781,285.6716 C378.7237,277.349 381.946,267.0966 393.1798,264.6445 C381.3031,251.113 384.1383,239.0915 401,232.5659 C401.3438,232.689 401.446,233.0251 401.1373,233.2746 " fill="none" filter="url(#fbav0aiq6575y)" style="stroke:#A80036;stroke-width:1.0;"></path><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="75" x="493.5" y="250.561">AwsConn</text></g><!--cluster blueTooth--><g id="cluster_blueTooth"><polygon fill="none" filter="url(#fbav0aiq6575y)" points="724,224.5659,734,214.5659,972,214.5659,972,330.5659,962,340.5659,724,340.5659,724,224.5659" style="stroke:#000000;stroke-width:1.5;"></polygon><line style="stroke:#000000;stroke-width:1.5;" x1="962" x2="972" y1="224.5659" y2="214.5659"></line><line style="stroke:#000000;stroke-width:1.5;" x1="724" x2="962" y1="224.5659" y2="224.5659"></line><line style="stroke:#000000;stroke-width:1.5;" x1="962" x2="962" y1="224.5659" y2="340.5659"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="80" x="804" y="240.561">blueTooth</text></g><!--entity appH1--><g id="elem_appH1"><rect fill="#FEFECE" filter="url(#fbav0aiq6575y)" height="46.2969" style="stroke:#A80036;stroke-width:1.0;" width="151" x="32.5" y="103.5659"></rect><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.0;" width="15" x="163.5" y="108.5659"></rect><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.0;" width="4" x="161.5" y="110.5659"></rect><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.0;" width="4" x="161.5" y="114.5659"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="47.5" y="136.561">appDataHandler</text></g><!--entity bus1--><g id="elem_bus1"><rect fill="#FEFECE" filter="url(#fbav0aiq6575y)" height="46.2969" style="stroke:#A80036;stroke-width:1.0;" width="103" x="218.5" y="103.5659"></rect><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.0;" width="15" x="301.5" y="108.5659"></rect><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.0;" width="4" x="299.5" y="110.5659"></rect><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.0;" width="4" x="299.5" y="114.5659"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="233.5" y="136.561">business</text></g><!--entity appRouter--><g id="elem_appRouter"><polygon fill="#FEFECE" filter="url(#fbav0aiq6575y)" points="379.5,113.5659,389.5,103.5659,524.5,103.5659,524.5,139.8628,514.5,149.8628,379.5,149.8628,379.5,113.5659" style="stroke:#000000;stroke-width:1.5;"></polygon><line style="stroke:#000000;stroke-width:1.5;" x1="514.5" x2="524.5" y1="113.5659" y2="103.5659"></line><line style="stroke:#000000;stroke-width:1.5;" x1="379.5" x2="514.5" y1="113.5659" y2="113.5659"></line><line style="stroke:#000000;stroke-width:1.5;" x1="514.5" x2="514.5" y1="113.5659" y2="149.8628"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="394.5" y="136.561">appDataRouter</text></g><!--entity awsMqtt--><g id="elem_awsMqtt"><rect fill="#FEFECE" filter="url(#fbav0aiq6575y)" height="46.2969" style="stroke:#A80036;stroke-width:1.0;" width="99" x="402.5" y="278.5659"></rect><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.0;" width="15" x="481.5" y="283.5659"></rect><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.0;" width="4" x="479.5" y="285.5659"></rect><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.0;" width="4" x="479.5" y="289.5659"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="417.5" y="311.561">AwsMqtt</text></g><!--entity awsShadow--><g id="elem_awsShadow"><rect fill="#FEFECE" filter="url(#fbav0aiq6575y)" height="46.2969" style="stroke:#A80036;stroke-width:1.0;" width="123" x="536.5" y="278.5659"></rect><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.0;" width="15" x="639.5" y="283.5659"></rect><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.0;" width="4" x="637.5" y="285.5659"></rect><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.0;" width="4" x="637.5" y="289.5659"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="551.5" y="311.561">AwsShadow</text></g><!--entity ros--><g id="elem_ros"><rect fill="#FEFECE" filter="url(#fbav0aiq6575y)" height="46.2969" style="stroke:#A80036;stroke-width:1.0;" width="99" x="856.5" y="278.5659"></rect><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.0;" width="15" x="935.5" y="283.5659"></rect><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.0;" width="4" x="933.5" y="285.5659"></rect><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.0;" width="4" x="933.5" y="289.5659"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="871.5" y="311.561">rosNode</text></g><!--entity bluez--><g id="elem_bluez"><rect fill="#FEFECE" filter="url(#fbav0aiq6575y)" height="46.2969" style="stroke:#A80036;stroke-width:1.0;" width="81" x="740.5" y="278.5659"></rect><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.0;" width="15" x="801.5" y="283.5659"></rect><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.0;" width="4" x="799.5" y="285.5659"></rect><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.0;" width="4" x="799.5" y="289.5659"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="755.5" y="311.561">BlueZ</text></g><!--link appH1 to bus1--><g id="link_appH1_bus1"><path d="M183.62,126.5659 C195.21,126.5659 206.79,126.5659 218.38,126.5659 " fill="none" id="appH1-bus1" style="stroke:#A80036;stroke-width:1.0;"></path></g><!--link bluez to ros--><g id="link_bluez_ros"><path d="M821.53,301.5659 C833.08,301.5659 844.63,301.5659 856.17,301.5659 " fill="none" id="bluez-ros" style="stroke:#A80036;stroke-width:1.0;"></path></g><!--link appH1 to appRouter--><g id="link_appH1_appRouter"><path d="M122.82,103.2159 C138.9,80.3059 166.89,46.8059 201,32.5659 C257.19,9.1159 280.69,11.9859 338,32.5659 C377.11,46.6159 408.3647,76.0585 428.9947,99.0685 " fill="none" id="appH1-to-appRouter" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"></path><polygon fill="#A80036" points="433,103.5359,429.9703,94.1646,429.6622,99.8131,424.0138,99.505,433,103.5359" style="stroke:#A80036;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="253.5" y="19.6328">ros topic</text></g><!--link appRouter to awsMqtt--><g id="link_appRouter_awsMqtt"><path d="M452,149.8259 C452,183.0459 452,239.2159 452,272.3859 " fill="none" id="appRouter-to-awsMqtt" style="stroke:#A80036;stroke-width:1.0;"></path><polygon fill="#A80036" points="452,278.3859,456,269.3859,452,273.3859,448,269.3859,452,278.3859" style="stroke:#A80036;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="453" y="194.6328">aws SDK</text></g><!--link appRouter to awsShadow--><g id="link_appRouter_awsShadow"><path d="M482.02,149.6059 C493.6,158.8159 506.54,170.0559 517,181.5659 C544.9,212.2659 567.6416,248.0121 582.3116,272.9921 " fill="none" id="appRouter-to-awsShadow" style="stroke:#A80036;stroke-width:1.0;"></path><polygon fill="#A80036" points="585.35,278.1659,584.2416,268.3796,582.818,273.8544,577.3432,272.4308,585.35,278.1659" style="stroke:#A80036;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="531" y="194.6328">aws SDK</text></g><!--link appRouter to ros--><g id="link_appRouter_ros"><path d="M524.87,135.9859 C622.13,148.3159 788.05,173.4459 839,206.5659 C865.88,224.0459 882.6645,251.0205 893.4745,272.8205 " fill="none" id="appRouter-to-ros" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"></path><polygon fill="#A80036" points="896.14,278.1959,895.7253,268.3558,893.9187,273.7164,888.5581,271.9098,896.14,278.1959" style="stroke:#A80036;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="824" y="194.6328">ros topic</text></g><!--SRC=[RL2x3i8m3Dpx5HPxAx4oLE8n824OA1CBIfj8L8IuDAagWVhlE74fvP7fx3lxuhENqa2DLaK6fO9hAQLMhQZLATIF2EWLUAtGAED0LDLAEB4MXcGr2Eixw-cNAcziQPIrdYVCT112p8qkOhy2jLQ56vi5sFliiN633HTifR6HC6_j4etfvpw_GDpsvbmOPVXVb9s5nBQNSH64tV35N3VgWEZEFs5CABSTIIP-dF0NlQ31OuY0m3sG0L46NapxEP8aVLy7Cy-1mweiedStJbzNa80GPAlDc6Q-l-MV8Y4JltYq_Wa0]--></g></svg></p><h4 id="通信模型">通信模型 </h4>
<p class="plantuml"><!--?xml version="1.0" encoding="us-ascii" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="1265px" preserveAspectRatio="none" style="width:898px;height:1265px;background:#FFFFFF;" version="1.1" viewBox="0 0 898 1265" width="898px" zoomAndPan="magnify"><defs><filter height="300%" id="f1q0ewrz315l1p" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"></feGaussianBlur><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></feColorMatrix><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"></feOffset><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"></feBlend></filter></defs><g><rect fill="none" filter="url(#f1q0ewrz315l1p)" height="435.125" style="stroke:#000000;stroke-width:2.0;" width="806.5" x="9" y="380.9609"></rect><rect fill="none" filter="url(#f1q0ewrz315l1p)" height="291.3281" style="stroke:#000000;stroke-width:2.0;" width="603.5" x="14" y="873.2188"></rect><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="43" x2="43" y1="88.2969" y2="1181.5469"></line><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="143.5" x2="143.5" y1="88.2969" y2="1181.5469"></line><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="216" x2="216" y1="88.2969" y2="1181.5469"></line><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="297" x2="297" y1="88.2969" y2="1181.5469"></line><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="384" x2="384" y1="88.2969" y2="1181.5469"></line><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="513" x2="513" y1="88.2969" y2="1181.5469"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="24" y="84.9951">User</text><ellipse cx="43" cy="15" fill="#FEFECE" filter="url(#f1q0ewrz315l1p)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"></ellipse><path d="M43,23 L43,50 M30,31 L56,31 M43,50 L30,65 M43,50 L56,65 " fill="none" filter="url(#f1q0ewrz315l1p)" style="stroke:#A80036;stroke-width:2.0;"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="24" y="1193.542">User</text><ellipse cx="43" cy="1206.8438" fill="#FEFECE" filter="url(#f1q0ewrz315l1p)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"></ellipse><path d="M43,1214.8438 L43,1241.8438 M30,1222.8438 L56,1222.8438 M43,1241.8438 L30,1256.8438 M43,1241.8438 L56,1256.8438 " fill="none" filter="url(#f1q0ewrz315l1p)" style="stroke:#A80036;stroke-width:2.0;"></path><rect fill="#FEFECE" filter="url(#f1q0ewrz315l1p)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="41" x="121.5" y="53"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="128.5" y="72.9951">App</text><rect fill="#FEFECE" filter="url(#f1q0ewrz315l1p)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="41" x="121.5" y="1180.5469"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="128.5" y="1200.542">App</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="177" y="84.9951">BlueTooth</text><ellipse cx="216" cy="56" fill="#FEFECE" filter="url(#f1q0ewrz315l1p)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"></ellipse><line style="stroke:#A80036;stroke-width:2.0;" x1="204" x2="228" y1="70" y2="70"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="177" y="1193.542">BlueTooth</text><ellipse cx="216" cy="1212.8438" fill="#FEFECE" filter="url(#f1q0ewrz315l1p)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"></ellipse><line style="stroke:#A80036;stroke-width:2.0;" x1="204" x2="228" y1="1226.8438" y2="1226.8438"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="265" y="84.9951">AwsMqtt</text><ellipse cx="297.5" cy="56" fill="#FEFECE" filter="url(#f1q0ewrz315l1p)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"></ellipse><polygon fill="#A80036" points="293.5,44,299.5,39,297.5,44,299.5,49,293.5,44" style="stroke:#A80036;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="265" y="1193.542">AwsMqtt</text><ellipse cx="297.5" cy="1212.8438" fill="#FEFECE" filter="url(#f1q0ewrz315l1p)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"></ellipse><polygon fill="#A80036" points="293.5,1200.8438,299.5,1195.8438,297.5,1200.8438,299.5,1205.8438,293.5,1200.8438" style="stroke:#A80036;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="340" y="84.9951">AwsShadow</text><path d="M366.5,36 C366.5,26 384.5,26 384.5,26 C384.5,26 402.5,26 402.5,36 L402.5,62 C402.5,72 384.5,72 384.5,72 C384.5,72 366.5,72 366.5,62 L366.5,36 " fill="#FEFECE" filter="url(#f1q0ewrz315l1p)" style="stroke:#A80036;stroke-width:1.5;"></path><path d="M366.5,36 C366.5,46 384.5,46 384.5,46 C384.5,46 402.5,46 402.5,36 " fill="none" style="stroke:#A80036;stroke-width:1.5;"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="340" y="1193.542">AwsShadow</text><path d="M366.5,1206.8438 C366.5,1196.8438 384.5,1196.8438 384.5,1196.8438 C384.5,1196.8438 402.5,1196.8438 402.5,1206.8438 L402.5,1232.8438 C402.5,1242.8438 384.5,1242.8438 384.5,1242.8438 C384.5,1242.8438 366.5,1242.8438 366.5,1232.8438 L366.5,1206.8438 " fill="#FEFECE" filter="url(#f1q0ewrz315l1p)" style="stroke:#A80036;stroke-width:1.5;"></path><path d="M366.5,1206.8438 C366.5,1216.8438 384.5,1216.8438 384.5,1216.8438 C384.5,1216.8438 402.5,1216.8438 402.5,1206.8438 " fill="none" style="stroke:#A80036;stroke-width:1.5;"></path><rect fill="#FEFECE" filter="url(#f1q0ewrz315l1p)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="61" x="481" y="53"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="488" y="72.9951">Device</text><rect fill="#FEFECE" filter="url(#f1q0ewrz315l1p)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="61" x="481" y="1180.5469"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="488" y="1200.542">Device</text><rect fill="#EEEEEE" filter="url(#f1q0ewrz315l1p)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="889.5" x="0" y="118.8633"></rect><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="889.5" y1="118.8633" y2="118.8633"></line><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="889.5" y1="121.8633" y2="121.8633"></line><rect fill="#EEEEEE" filter="url(#f1q0ewrz315l1p)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="139" x="375.25" y="108.2969"></rect><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="381.25" y="124.3638">Bluetooth in use</text><polygon fill="#A80036" points="132,158.5625,142,162.5625,132,166.5625,136,162.5625" style="stroke:#A80036;stroke-width:1.0;"></polygon><line style="stroke:#A80036;stroke-width:1.0;" x1="43" x2="138" y1="162.5625" y2="162.5625"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="50" y="157.4966">request</text><polygon fill="#A80036" points="204,172.5625,214,176.5625,204,180.5625,208,176.5625" style="stroke:#A80036;stroke-width:1.0;"></polygon><line style="stroke:#A80036;stroke-width:1.0;" x1="144" x2="210" y1="176.5625" y2="176.5625"></line><polygon fill="#A80036" points="501.5,186.5625,511.5,190.5625,501.5,194.5625,505.5,190.5625" style="stroke:#A80036;stroke-width:1.0;"></polygon><line style="stroke:#A80036;stroke-width:1.0;" x1="216" x2="507.5" y1="190.5625" y2="190.5625"></line><polygon fill="#A80036" points="227,200.5625,217,204.5625,227,208.5625,223,204.5625" style="stroke:#A80036;stroke-width:1.0;"></polygon><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="221" x2="512.5" y1="204.5625" y2="204.5625"></line><polygon fill="#A80036" points="155,214.5625,145,218.5625,155,222.5625,151,218.5625" style="stroke:#A80036;stroke-width:1.0;"></polygon><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="149" x2="215" y1="218.5625" y2="218.5625"></line><polygon fill="#A80036" points="54,243.6953,44,247.6953,54,251.6953,50,247.6953" style="stroke:#A80036;stroke-width:1.0;"></polygon><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="48" x2="143" y1="247.6953" y2="247.6953"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="60" y="242.6294">response</text><polygon fill="#FBFB77" filter="url(#f1q0ewrz315l1p)" points="29,260.6953,526,260.6953,536,264.6953,526,268.6953,29,268.6953,19,264.6953,29,260.6953" style="stroke:#A80036;stroke-width:1.0;"></polygon><polygon fill="#A80036" points="227,275.6953,217,279.6953,227,283.6953,223,279.6953" style="stroke:#A80036;stroke-width:1.0;"></polygon><line style="stroke:#A80036;stroke-width:1.0;" x1="221" x2="512.5" y1="279.6953" y2="279.6953"></line><polygon fill="#A80036" points="155,289.6953,145,293.6953,155,297.6953,151,293.6953" style="stroke:#A80036;stroke-width:1.0;"></polygon><line style="stroke:#A80036;stroke-width:1.0;" x1="149" x2="215" y1="293.6953" y2="293.6953"></line><polygon fill="#A80036" points="54,318.8281,44,322.8281,54,326.8281,50,322.8281" style="stroke:#A80036;stroke-width:1.0;"></polygon><line style="stroke:#A80036;stroke-width:1.0;" x1="48" x2="143" y1="322.8281" y2="322.8281"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="60" y="317.7622">report</text><rect fill="#EEEEEE" filter="url(#f1q0ewrz315l1p)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="889.5" x="0" y="351.3945"></rect><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="889.5" y1="351.3945" y2="351.3945"></line><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="889.5" y1="354.3945" y2="354.3945"></line><rect fill="#EEEEEE" filter="url(#f1q0ewrz315l1p)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="98" x="395.75" y="340.8281"></rect><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="79" x="401.75" y="356.895">Aws in use</text><path d="M9,380.9609 L111,380.9609 L111,388.0938 L101,398.0938 L9,398.0938 L9,380.9609 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"></path><rect fill="none" height="435.125" style="stroke:#000000;stroke-width:2.0;" width="806.5" x="9" y="380.9609"></rect><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="57" x="24" y="394.0278">shadow</text><polygon fill="#A80036" points="395.5,415.2266,385.5,419.2266,395.5,423.2266,391.5,419.2266" style="stroke:#A80036;stroke-width:1.0;"></polygon><line style="stroke:#A80036;stroke-width:1.0;" x1="389.5" x2="512.5" y1="419.2266" y2="419.2266"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="401.5" y="414.1606">value report</text><line style="stroke:#A80036;stroke-width:1.0;" x1="384.5" x2="426.5" y1="448.3594" y2="448.3594"></line><line style="stroke:#A80036;stroke-width:1.0;" x1="426.5" x2="426.5" y1="448.3594" y2="461.3594"></line><line style="stroke:#A80036;stroke-width:1.0;" x1="385.5" x2="426.5" y1="461.3594" y2="461.3594"></line><polygon fill="#A80036" points="395.5,457.3594,385.5,461.3594,395.5,465.3594,391.5,461.3594" style="stroke:#A80036;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="391.5" y="443.2935">update doc</text><polygon fill="#A80036" points="132,486.4922,142,490.4922,132,494.4922,136,490.4922" style="stroke:#A80036;stroke-width:1.0;"></polygon><line style="stroke:#A80036;stroke-width:1.0;" x1="43" x2="138" y1="490.4922" y2="490.4922"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="50" y="485.4263">get value</text><polygon fill="#A80036" points="372.5,528.1914,382.5,532.1914,372.5,536.1914,376.5,532.1914" style="stroke:#A80036;stroke-width:1.0;"></polygon><line style="stroke:#A80036;stroke-width:1.0;" x1="144" x2="378.5" y1="532.1914" y2="532.1914"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="151" y="527.1255">get shadow</text><path d="M389,503.4922 L389,543.4922 L648,543.4922 L648,513.4922 L638,503.4922 L389,503.4922 " fill="#FBFB77" filter="url(#f1q0ewrz315l1p)" style="stroke:#A80036;stroke-width:1.0;"></path><path d="M638,503.4922 L638,513.4922 L648,513.4922 L638,503.4922 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"></path><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205" x="395" y="520.5591">App get value from shadow doc,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="238" x="395" y="535.6919">which is previously updated by device</text><polygon fill="#FBFB77" filter="url(#f1q0ewrz315l1p)" points="29,557.7578,526,557.7578,536,561.7578,526,565.7578,29,565.7578,19,561.7578,29,557.7578" style="stroke:#A80036;stroke-width:1.0;"></polygon><polygon fill="#A80036" points="132,587.8906,142,591.8906,132,595.8906,136,591.8906" style="stroke:#A80036;stroke-width:1.0;"></polygon><line style="stroke:#A80036;stroke-width:1.0;" x1="43" x2="138" y1="591.8906" y2="591.8906"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="50" y="586.8247">set value</text><polygon fill="#A80036" points="372.5,617.0234,382.5,621.0234,372.5,625.0234,376.5,621.0234" style="stroke:#A80036;stroke-width:1.0;"></polygon><line style="stroke:#A80036;stroke-width:1.0;" x1="144" x2="378.5" y1="621.0234" y2="621.0234"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="151" y="615.9575">update shadow</text><polygon fill="#A80036" points="501.5,661.2891,511.5,665.2891,501.5,669.2891,505.5,665.2891" style="stroke:#A80036;stroke-width:1.0;"></polygon><line style="stroke:#A80036;stroke-width:1.0;" x1="384.5" x2="507.5" y1="665.2891" y2="665.2891"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="391.5" y="645.0903">update event</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="391.5" y="660.2231">&nbsp;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="98" x="395.5" y="660.2231">change value</text><polygon fill="#A80036" points="395.5,690.4219,385.5,694.4219,395.5,698.4219,391.5,694.4219" style="stroke:#A80036;stroke-width:1.0;"></polygon><line style="stroke:#A80036;stroke-width:1.0;" x1="389.5" x2="512.5" y1="694.4219" y2="694.4219"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="401.5" y="689.356">real value report</text><polygon fill="#A80036" points="155,747.2539,145,751.2539,155,755.2539,151,751.2539" style="stroke:#A80036;stroke-width:1.0;"></polygon><line style="stroke:#A80036;stroke-width:1.0;" x1="149" x2="383.5" y1="751.2539" y2="751.2539"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="161" y="746.188">shadow report</text><path d="M389,707.4219 L389,777.4219 L796,777.4219 L796,717.4219 L786,707.4219 L389,707.4219 " fill="#FBFB77" filter="url(#f1q0ewrz315l1p)" style="stroke:#A80036;stroke-width:1.0;"></path><path d="M786,707.4219 L786,717.4219 L796,717.4219 L786,707.4219 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"></path><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="298" x="395" y="724.4888">App set value to modify 'desire' in shadow doc,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="348" x="395" y="739.6216">then device receive the update event with topic 'delta'.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="362" x="395" y="754.7544">Device set value according to appdata, and the report to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="382" x="395" y="769.8872">modity shadow doc, which is the source of App data display.</text><polygon fill="#A80036" points="54,804.0859,44,808.0859,54,812.0859,50,808.0859" style="stroke:#A80036;stroke-width:1.0;"></polygon><line style="stroke:#A80036;stroke-width:1.0;" x1="48" x2="143" y1="808.0859" y2="808.0859"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="60" y="803.02">data display</text><rect fill="#EEEEEE" filter="url(#f1q0ewrz315l1p)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="889.5" x="0" y="843.6523"></rect><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="889.5" y1="843.6523" y2="843.6523"></line><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="889.5" y1="846.6523" y2="846.6523"></line><rect fill="#EEEEEE" filter="url(#f1q0ewrz315l1p)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="145" x="372.25" y="833.0859"></rect><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="126" x="378.25" y="849.1528">Mqtt topic in use</text><path d="M14,873.2188 L95,873.2188 L95,880.3516 L85,890.3516 L14,890.3516 L14,873.2188 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"></path><rect fill="none" height="291.3281" style="stroke:#000000;stroke-width:2.0;" width="603.5" x="14" y="873.2188"></rect><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="36" x="29" y="886.2856">mqtt</text><path d="M622.5,878.2188 L622.5,903.2188 L870.5,903.2188 L870.5,888.2188 L860.5,878.2188 L622.5,878.2188 " fill="#FBFB77" filter="url(#f1q0ewrz315l1p)" style="stroke:#A80036;stroke-width:1.0;"></path><path d="M860.5,878.2188 L860.5,888.2188 L870.5,888.2188 L860.5,878.2188 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"></path><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="227" x="628.5" y="895.2856">When to report data via mqtt topic?</text><polygon fill="#A80036" points="132,907.4844,142,911.4844,132,915.4844,136,911.4844" style="stroke:#A80036;stroke-width:1.0;"></polygon><line style="stroke:#A80036;stroke-width:1.0;" x1="43" x2="138" y1="911.4844" y2="911.4844"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="50" y="906.4185">set value</text><polygon fill="#A80036" points="285.5,936.6172,295.5,940.6172,285.5,944.6172,289.5,940.6172" style="stroke:#A80036;stroke-width:1.0;"></polygon><line style="stroke:#A80036;stroke-width:1.0;" x1="144" x2="291.5" y1="940.6172" y2="940.6172"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="151" y="935.5513">topic pub</text><polygon fill="#A80036" points="501.5,965.75,511.5,969.75,501.5,973.75,505.5,969.75" style="stroke:#A80036;stroke-width:1.0;"></polygon><line style="stroke:#A80036;stroke-width:1.0;" x1="297.5" x2="507.5" y1="969.75" y2="969.75"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="304.5" y="964.6841">topic pub</text><line style="stroke:#A80036;stroke-width:1.0;" x1="513.5" x2="555.5" y1="1014.0156" y2="1014.0156"></line><line style="stroke:#A80036;stroke-width:1.0;" x1="555.5" x2="555.5" y1="1014.0156" y2="1027.0156"></line><line style="stroke:#A80036;stroke-width:1.0;" x1="514.5" x2="555.5" y1="1027.0156" y2="1027.0156"></line><polygon fill="#A80036" points="524.5,1023.0156,514.5,1027.0156,524.5,1031.0156,520.5,1027.0156" style="stroke:#A80036;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="520.5" y="993.8169">topic sub,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="520.5" y="1008.9497">change value</text><polygon fill="#A80036" points="308.5,1052.1484,298.5,1056.1484,308.5,1060.1484,304.5,1056.1484" style="stroke:#A80036;stroke-width:1.0;"></polygon><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="302.5" x2="512.5" y1="1056.1484" y2="1056.1484"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="314.5" y="1051.0825">topic pub, report response</text><polygon fill="#A80036" points="155,1081.2813,145,1085.2813,155,1089.2813,151,1085.2813" style="stroke:#A80036;stroke-width:1.0;"></polygon><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="149" x2="296.5" y1="1085.2813" y2="1085.2813"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="161" y="1080.2153">topic pub</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="144" x2="186" y1="1114.4141" y2="1114.4141"></line><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="186" x2="186" y1="1114.4141" y2="1127.4141"></line><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="145" x2="186" y1="1127.4141" y2="1127.4141"></line><polygon fill="#A80036" points="155,1123.4141,145,1127.4141,155,1131.4141,151,1127.4141" style="stroke:#A80036;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="151" y="1109.3481">topic sub</text><polygon fill="#A80036" points="54,1152.5469,44,1156.5469,54,1160.5469,50,1156.5469" style="stroke:#A80036;stroke-width:1.0;"></polygon><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="48" x2="143" y1="1156.5469" y2="1156.5469"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="60" y="1151.481">response</text><!--SRC=[TLHDRzim3BthL_0M84Zx0mAaGuTTTzg6NNgH9IKMvaYg93lmloz9-KDsrnnYYnGV7nz9ft_MGVJ92AcoZ_0dcGWoGOzF4MJCLjaWNORN4CWkGn36PPj7-DxrvhVtkILxWmUXlClHT_3wI3_VSoRx7Pz2oomRcGmvVhLI-mUv4hzjalmmWrM6d9hVXBXSE4_cF4WLUS7b8eWUFBqG7JX3DE-zILdG2OtCXVxeC0EL9pnj_GMY1E8xmn9U2jwX9gtp6Uae52YT5uXTXWMWYWy-PYQF5LUqRz7tOIvyXIi6E0-I8AVeoLYv-u126j1URUk_cGmSEjEO0u0yqq5mAT7UsYm0VzJF9H2kqT_dcuX_uYkFrYeKFK68IDNtgHkXSD3GZBEoncaWRB5Jgw9uXlGbnQceIPErw8A- -Cs0K_Vcu7XKhNGtKz2EnqygalgoWo-aBFCodIVlVuHPw4BsSFVQNaSuQ9DiD0Tgvrwft1etCKPKPUnWoBOX3m-B8vnzi8gmkYmFpnmy3VsQKohbexRkHjcHCQtF2IJgJ9Y5DReucCZXBbQ4rhRHxUJxYE3-odKH4cYRGYV7PrXRjntV-fRWIpotFC-yrwM8_LZpgcyNyrFRwGxQ2q3e6y66fTqRrzhPdJFrpGdUN3q8zNhlSvncoPQrBaaNbclA-JjGsrDbttyVLcrsG_IN1WAxDsLcHGSh2pV6_RQe_m40]--></g></svg></p><h4 id="通信接口">通信接口 </h4>
<h5 id="ros接口">ros接口 </h5>
<table>
<thead>
<tr>
<th>topic/service</th>
<th>ros service/msg</th>
<th>type</th>
<th>paraphrase</th>
<th>data direction</th>
</tr>
</thead>
<tbody>
<tr>
<td>/IotGetShadow</td>
<td>IotShadow</td>
<td>Service</td>
<td>Get Aws shadow document</td>
<td>device-&gt;aws</td>
</tr>
<tr>
<td>/IotDeleteShadow</td>
<td>IotShadow</td>
<td>Service</td>
<td>Delete Aws shadow document</td>
<td>device-&gt;aws</td>
</tr>
<tr>
<td>/IotUpdateShadow</td>
<td>IotShadow</td>
<td>Service</td>
<td>Update Aws shadow document reliably</td>
<td>devide-&gt;aws</td>
</tr>
<tr>
<td>/ReqFromApp</td>
<td>AppMsg</td>
<td>Topic</td>
<td>Data request from APP</td>
<td>aws-&gt;device, bt-&gt;device</td>
</tr>
<tr>
<td>/RespToApp</td>
<td>AppMsg</td>
<td>Topic</td>
<td>Data response for APP</td>
<td>device-&gt;aws, device-&gt;bt</td>
</tr>
<tr>
<td>/ReportApp</td>
<td>AppMsg</td>
<td>Topic</td>
<td>Device daata report to APP</td>
<td>device-&gt;aws, device-&gt;bt</td>
</tr>
<tr>
<td>/AppOnline</td>
<td></td>
<td>Topic</td>
<td>App online type</td>
<td>collect_node-&gt;other  node</td>
</tr>
</tbody>
</table>
<h5 id="ros消息服务">ros消息/服务 </h5>
<ul>
<li>service: IotShadow</li>
</ul>
<p>getShadowDoc</p>
<p class="plantuml"><!--?xml version="1.0" encoding="us-ascii" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="112px" preserveAspectRatio="none" style="width:1050px;height:112px;background:#FFFFFF;" version="1.1" viewBox="0 0 1050 112" width="1050px" zoomAndPan="magnify"><defs></defs><g><rect fill="#F1F1F1" height="40.5938" rx="5" ry="5" style="stroke:#F1F1F1;stroke-width:1.5;" width="59" x="10" y="20.0938"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="27" x="15" y="35.0889">req</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="52" y="35.0889">&nbsp;</text><line style="stroke:#000000;stroke-width:1.0;" x1="47" x2="47" y1="20.0938" y2="40.3906"></line><line style="stroke:#000000;stroke-width:1.0;" x1="10" x2="69" y1="40.3906" y2="40.3906"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="26" x="15" y="55.3857">res</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="12" x="52" y="55.3857">&nbsp;&nbsp;&nbsp;</text><line style="stroke:#000000;stroke-width:1.0;" x1="47" x2="47" y1="40.3906" y2="60.6875"></line><rect fill="none" height="40.5938" rx="5" ry="5" style="stroke:#000000;stroke-width:1.5;" width="59" x="10" y="20.0938"></rect><rect fill="#F1F1F1" height="81.1875" rx="5" ry="5" style="stroke:#F1F1F1;stroke-width:1.5;" width="645" x="106" y="10"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="150" x="111" y="24.9951">desired(AppData[])</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="217" x="284" y="24.9951">Shadow doc desired json string</text><line style="stroke:#000000;stroke-width:1.0;" x1="279" x2="279" y1="10" y2="30.2969"></line><line style="stroke:#000000;stroke-width:1.0;" x1="106" x2="751" y1="30.2969" y2="30.2969"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="163" x="111" y="45.292">metadata(AppData[])</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="200" x="284" y="45.292">Shadow doc meta json string</text><line style="stroke:#000000;stroke-width:1.0;" x1="279" x2="279" y1="30.2969" y2="50.5938"></line><line style="stroke:#000000;stroke-width:1.0;" x1="106" x2="751" y1="50.5938" y2="50.5938"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="144" x="111" y="65.5889">timestamp(uint64)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="462" x="284" y="65.5889">The Epoch date and time, the response was generated by AWS IoT</text><line style="stroke:#000000;stroke-width:1.0;" x1="279" x2="279" y1="50.5938" y2="70.8906"></line><line style="stroke:#000000;stroke-width:1.0;" x1="106" x2="751" y1="70.8906" y2="70.8906"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="43" x="111" y="85.8857">iotret</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="12" x="284" y="85.8857">&nbsp;&nbsp;&nbsp;</text><line style="stroke:#000000;stroke-width:1.0;" x1="279" x2="279" y1="70.8906" y2="91.1875"></line><rect fill="none" height="81.1875" rx="5" ry="5" style="stroke:#000000;stroke-width:1.5;" width="645" x="106" y="10"></rect><rect fill="#F1F1F1" height="40.5938" rx="5" ry="5" style="stroke:#F1F1F1;stroke-width:1.5;" width="250" x="788" y="60.0938"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="91" x="793" y="75.0889">code(int64)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="894" y="75.0889">Response code</text><line style="stroke:#000000;stroke-width:1.0;" x1="889" x2="889" y1="60.0938" y2="80.3906"></line><line style="stroke:#000000;stroke-width:1.0;" x1="788" x2="1038" y1="80.3906" y2="80.3906"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="91" x="793" y="95.3857">msg(string)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="894" y="95.3857">Response message</text><line style="stroke:#000000;stroke-width:1.0;" x1="889" x2="889" y1="80.3906" y2="100.6875"></line><rect fill="none" height="40.5938" rx="5" ry="5" style="stroke:#000000;stroke-width:1.5;" width="250" x="788" y="60.0938"></rect><path d="M739,80.5938 L752,80.5938 C761.2345,80.5938 770.7679,80.5938 780.3679,80.5938 " fill="none" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:3.0,3.0;"></path><path d="M780.3679,83.6773 L782.6806,80.5938 L780.3679,77.5102 L788.0769,80.5938 L780.3679,83.6773 " fill="#000000" style="stroke:#000000;stroke-width:1.0;"></path><ellipse cx="739" cy="80.5938" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;"></ellipse><path d="M57,50.5938 L70,50.5938 C79.4407,50.5938 89.0214,50.5938 98.6923,50.5938 " fill="none" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:3.0,3.0;"></path><path d="M98.6923,53.7034 L101.0245,50.5938 L98.6923,47.4841 L106.4665,50.5938 L98.6923,53.7034 " fill="#000000" style="stroke:#000000;stroke-width:1.0;"></path><ellipse cx="57" cy="50.5938" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;"></ellipse><!--SRC=[TL3DJW8n6BptAIPxMX8ae4ZCda0G8q8qBEZ1U2ZqSwc1Tcsx66DuTxzTG6EYboQTlywqwuDquTLR8pu5WCZHMvH4KVrmyL5IuOWKUUr8nRqy7yWWdvvhh4jNKjbtABl4WKUP1H-SDja-1T66WbJi-TTR2luo1hqXBhZ9uqARq6cNjjcAS9NRvGeSIP16ePJL4PZWmhardl0kFJ8ov5YZiFX0xp75ZPqTaxKDZi9nN0KjhQBu-vdfCQc43wxz69_5-vQ_P5pKouoYWt0dgcCdkcHKzRtYVYrDc4_6s9BpchUs6gVDqtRZB1uwZI4jqEgWUPQqcqdp7FrqXfAkYVZwVWnl2xSaA5q-lIW2-sjY9BSIqyAK-nFSvMH6WziZW2kprSwQ3PaWHW-J7q6dVNAf0r9ot0GF4p6W5rci0pjuB0zBC9yDJox4M9giu549o8Y-vLptmLpw1G00]--></g></svg></p><p>deleteShadowDoc</p>
<p class="plantuml"><!--?xml version="1.0" encoding="us-ascii" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="82px" preserveAspectRatio="none" style="width:914px;height:82px;background:#FFFFFF;" version="1.1" viewBox="0 0 914 82" width="914px" zoomAndPan="magnify"><defs></defs><g><rect fill="#F1F1F1" height="40.5938" rx="5" ry="5" style="stroke:#F1F1F1;stroke-width:1.5;" width="59" x="10" y="10"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="27" x="15" y="24.9951">req</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="52" y="24.9951">&nbsp;</text><line style="stroke:#000000;stroke-width:1.0;" x1="47" x2="47" y1="10" y2="30.2969"></line><line style="stroke:#000000;stroke-width:1.0;" x1="10" x2="69" y1="30.2969" y2="30.2969"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="26" x="15" y="45.292">res</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="12" x="52" y="45.292">&nbsp;&nbsp;&nbsp;</text><line style="stroke:#000000;stroke-width:1.0;" x1="47" x2="47" y1="30.2969" y2="50.5938"></line><rect fill="none" height="40.5938" rx="5" ry="5" style="stroke:#000000;stroke-width:1.5;" width="59" x="10" y="10"></rect><rect fill="#F1F1F1" height="40.5938" rx="5" ry="5" style="stroke:#F1F1F1;stroke-width:1.5;" width="509" x="106" y="20"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="144" x="111" y="34.9951">timestamp(uint64)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="345" x="265" y="34.9951">The time the response was generated by AWS IoT</text><line style="stroke:#000000;stroke-width:1.0;" x1="260" x2="260" y1="20" y2="40.2969"></line><line style="stroke:#000000;stroke-width:1.0;" x1="106" x2="615" y1="40.2969" y2="40.2969"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="43" x="111" y="55.292">iotret</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="12" x="265" y="55.292">&nbsp;&nbsp;&nbsp;</text><line style="stroke:#000000;stroke-width:1.0;" x1="260" x2="260" y1="40.2969" y2="60.5938"></line><rect fill="none" height="40.5938" rx="5" ry="5" style="stroke:#000000;stroke-width:1.5;" width="509" x="106" y="20"></rect><rect fill="#F1F1F1" height="40.5938" rx="5" ry="5" style="stroke:#F1F1F1;stroke-width:1.5;" width="250" x="652" y="30"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="91" x="657" y="44.9951">code(int64)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="758" y="44.9951">Response code</text><line style="stroke:#000000;stroke-width:1.0;" x1="753" x2="753" y1="30" y2="50.2969"></line><line style="stroke:#000000;stroke-width:1.0;" x1="652" x2="902" y1="50.2969" y2="50.2969"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="91" x="657" y="65.292">msg(string)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="758" y="65.292">Response message</text><line style="stroke:#000000;stroke-width:1.0;" x1="753" x2="753" y1="50.2969" y2="70.5938"></line><rect fill="none" height="40.5938" rx="5" ry="5" style="stroke:#000000;stroke-width:1.5;" width="250" x="652" y="30"></rect><path d="M603,50.5 L616,50.5 C625.2345,50.5 634.7679,50.5 644.3679,50.5 " fill="none" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:3.0,3.0;"></path><path d="M644.3679,53.5836 L646.6806,50.5 L644.3679,47.4164 L652.0769,50.5 L644.3679,53.5836 " fill="#000000" style="stroke:#000000;stroke-width:1.0;"></path><ellipse cx="603" cy="50.5" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;"></ellipse><path d="M57,40.5 L70,40.5 C79.3359,40.5 88.8408,40.5 98.4413,40.5 " fill="none" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:3.0,3.0;"></path><path d="M98.4413,43.5874 L100.7569,40.5 L98.4413,37.4126 L106.1598,40.5 L98.4413,43.5874 " fill="#000000" style="stroke:#000000;stroke-width:1.0;"></path><ellipse cx="57" cy="40.5" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;"></ellipse><!--SRC=[LL31Ri8m3BtdAwoUYZHGWGvDER71cCP0GxImSw1UbuawB76PqCI_avR1M0vH_FpUir_wZfNbJsT8_0Zm9x3u5SWWk3bNBf2dJbspBj1BYcrOQk9UtF3Sz0EXme7zmmksXXp2jtAG8w5LZ1cizd3_bi2pIN-TQpTjs29V3wZXjSamlDZFpuuLVAMkgONBGyTMK_wFwfTqAiVWGZw8qtqGVQIipYjc6qMyc4vWXzPfGz1kTQ9EtEg68wjXX2jezo3goZYIqIqCaXIgTaE4JxC9E5FQDKAcg-chahs-8SPgfs1UKlKR4bwtIEFXonc0HzffQwX0OZ5UJly8lRZve1aIj7uJM4x54DzLkM6ly9bzDWcBTDIy4nD5UUbpIK0I0-DzxTxtaYC0]--></g></svg></p><p>updateShadow</p>
<p class="plantuml"><!--?xml version="1.0" encoding="us-ascii" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="111px" preserveAspectRatio="none" style="width:914px;height:111px;background:#FFFFFF;" version="1.1" viewBox="0 0 914 111" width="914px" zoomAndPan="magnify"><defs></defs><g><rect fill="#F1F1F1" height="40.5938" rx="5" ry="5" style="stroke:#F1F1F1;stroke-width:1.5;" width="59" x="10" y="23.6484"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="27" x="15" y="38.6436">req</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="12" x="52" y="38.6436">&nbsp;&nbsp;&nbsp;</text><line style="stroke:#000000;stroke-width:1.0;" x1="47" x2="47" y1="23.6484" y2="43.9453"></line><line style="stroke:#000000;stroke-width:1.0;" x1="10" x2="69" y1="43.9453" y2="43.9453"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="26" x="15" y="58.9404">res</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="12" x="52" y="58.9404">&nbsp;&nbsp;&nbsp;</text><line style="stroke:#000000;stroke-width:1.0;" x1="47" x2="47" y1="43.9453" y2="64.2422"></line><rect fill="none" height="40.5938" rx="5" ry="5" style="stroke:#000000;stroke-width:1.5;" width="59" x="10" y="23.6484"></rect><rect fill="#F1F1F1" height="20.2969" rx="5" ry="5" style="stroke:#F1F1F1;stroke-width:1.5;" width="409" x="156" y="10"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="153" x="161" y="24.9951">appdata(AppData[])</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="236" x="324" y="24.9951">Data to update shadow document</text><line style="stroke:#000000;stroke-width:1.0;" x1="319" x2="319" y1="10" y2="30.2969"></line><rect fill="none" height="20.2969" rx="5" ry="5" style="stroke:#000000;stroke-width:1.5;" width="409" x="156" y="10"></rect><rect fill="#F1F1F1" height="40.5938" rx="5" ry="5" style="stroke:#F1F1F1;stroke-width:1.5;" width="509" x="106" y="48.6484"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="144" x="111" y="63.6436">timestamp(uint64)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="345" x="265" y="63.6436">The time the response was generated by AWS IoT</text><line style="stroke:#000000;stroke-width:1.0;" x1="260" x2="260" y1="48.6484" y2="68.9453"></line><line style="stroke:#000000;stroke-width:1.0;" x1="106" x2="615" y1="68.9453" y2="68.9453"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="43" x="111" y="83.9404">iotret</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="12" x="265" y="83.9404">&nbsp;&nbsp;&nbsp;</text><line style="stroke:#000000;stroke-width:1.0;" x1="260" x2="260" y1="68.9453" y2="89.2422"></line><rect fill="none" height="40.5938" rx="5" ry="5" style="stroke:#000000;stroke-width:1.5;" width="509" x="106" y="48.6484"></rect><rect fill="#F1F1F1" height="40.5938" rx="5" ry="5" style="stroke:#F1F1F1;stroke-width:1.5;" width="250" x="652" y="58.6484"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="91" x="657" y="73.6436">code(int64)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="758" y="73.6436">Response code</text><line style="stroke:#000000;stroke-width:1.0;" x1="753" x2="753" y1="58.6484" y2="78.9453"></line><line style="stroke:#000000;stroke-width:1.0;" x1="652" x2="902" y1="78.9453" y2="78.9453"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="91" x="657" y="93.9404">msg(string)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="758" y="93.9404">Response message</text><line style="stroke:#000000;stroke-width:1.0;" x1="753" x2="753" y1="78.9453" y2="99.2422"></line><rect fill="none" height="40.5938" rx="5" ry="5" style="stroke:#000000;stroke-width:1.5;" width="250" x="652" y="58.6484"></rect><path d="M57,34.1484 L70,34.1484 C111.9636,34.1484 157.3032,32.6679 199.385,30.6697 " fill="none" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:3.0,3.0;"></path><path d="M199.5312,33.687 L201.648,30.5601 L199.2389,27.6524 L206.9283,30.3044 L199.5312,33.687 " fill="#000000" style="stroke:#000000;stroke-width:1.0;"></path><ellipse cx="57" cy="34.1484" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;"></ellipse><path d="M603,79.1484 L616,79.1484 C625.2345,79.1484 634.7679,79.1484 644.3679,79.1484 " fill="none" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:3.0,3.0;"></path><path d="M644.3679,82.232 L646.6806,79.1484 L644.3679,76.0649 L652.0769,79.1484 L644.3679,82.232 " fill="#000000" style="stroke:#000000;stroke-width:1.0;"></path><ellipse cx="603" cy="79.1484" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;"></ellipse><path d="M57,54.1484 L70,54.1484 C79.3483,54.1484 88.8639,54.2271 98.4735,54.3731 " fill="none" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:3.0,3.0;"></path><path d="M98.421,57.4633 L100.7912,54.4125 L98.526,51.283 L106.199,54.5044 L98.421,57.4633 " fill="#000000" style="stroke:#000000;stroke-width:1.0;"></path><ellipse cx="57" cy="54.1484" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1.0;"></ellipse><!--SRC=[LL3BRi8m4BpxArOv1GbGW1HLEK6XLAMW8XBeeUh1u6rmHUpK3n2g-FVQGRnyyNfsPyQpFMseCZzQ2l97m9r0uM-GdEhgJSkIKKF3VbaEtVtvLGkIm5TW95ZVGz0RokGUc5pR0eK9AlQnVXRKTuA65-XSYpAqN9XkxFMo3OB7mRZ24KefDCAUQiXHe78U35O7w7-ay2gpe7vLuz8eDBS65RoM3CEB_FoiwE4RTZLQw3pKHd6HtuswJsgQOt0PFfvIaIFfeM3LoiXiIuLPJ2UmGwMv5D1gjgDstEo48yLXX2jeTI7g976KH0ymI3FmxHe9NsOJqDAgDGBZtdrbZUFNo9ZkACojyDj8uBr4CHw-dG5u5ZkkfF1B9kFbz3hGZHjFt42Aolq4bbCon6zgjyOnN6QNBO55DceyaWaLkNMv4a111jBfgeFhfVy0]--></g></svg></p><ul>
<li>msg:AppData</li>
</ul>
<p class="plantuml"><!--?xml version="1.0" encoding="us-ascii" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="82px" preserveAspectRatio="none" style="width:437px;height:82px;background:#FFFFFF;" version="1.1" viewBox="0 0 437 82" width="437px" zoomAndPan="magnify"><defs></defs><g><rect fill="#F1F1F1" height="60.8906" rx="5" ry="5" style="stroke:#F1F1F1;stroke-width:1.5;" width="415" x="10" y="10"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="86" x="15" y="24.9951">key(string)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="144" y="24.9951">App data key</text><line style="stroke:#000000;stroke-width:1.0;" x1="139" x2="139" y1="10" y2="30.2969"></line><line style="stroke:#000000;stroke-width:1.0;" x1="10" x2="425" y1="30.2969" y2="30.2969"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="119" x="15" y="45.292">payload(string)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="144" y="45.292">App data payload</text><line style="stroke:#000000;stroke-width:1.0;" x1="139" x2="139" y1="30.2969" y2="50.5938"></line><line style="stroke:#000000;stroke-width:1.0;" x1="10" x2="425" y1="50.5938" y2="50.5938"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="78" x="15" y="65.5889">res(uint8)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="276" x="144" y="65.5889">res code, only necessary for a response</text><line style="stroke:#000000;stroke-width:1.0;" x1="139" x2="139" y1="50.5938" y2="70.8906"></line><rect fill="none" height="60.8906" rx="5" ry="5" style="stroke:#000000;stroke-width:1.5;" width="415" x="10" y="10"></rect><!--SRC=[RP11Ru9048Nl-oicd21HWqgDuMIhfGc5r1JrFi98jiLPihkGaAR_lKjRqqldDlE-Dtap6sDHspUZM7m8SEMzq-0RgoNNWHTxzsqB5Le4D_OcFqIBGwEm-e_wbMwa9kDtakrwX5m3fQfe0egR0PXACWRr01Ub0S79hM93dlWK6-BgEvFODyZsc6VGapPICSndYt0HpPP-eYKaT8Rv2i9b78LnU0VRuW2Z70Z_QP-1KPqk2Iev9Zrtrla3aMAFyDgnbLUAuQKbJdVFjm4ySY-ruYkn5Uaf_mDMqVH1MYX8koHmoiMEBjWrrZdSKUuFCHmFoNGjCkIwmzhj9XPRvVRgmMd55m00]--></g></svg></p><ul>
<li>msg:AppMsg</li>
</ul>
<p class="plantuml"><!--?xml version="1.0" encoding="us-ascii" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="123px" preserveAspectRatio="none" style="width:854px;height:123px;background:#FFFFFF;" version="1.1" viewBox="0 0 854 123" width="854px" zoomAndPan="magnify"><defs></defs><g><rect fill="#F1F1F1" height="101.4844" rx="5" ry="5" style="stroke:#F1F1F1;stroke-width:1.5;" width="832" x="10" y="10"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="153" x="15" y="24.9951">appdata(AppData[])</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="188" y="24.9951">App data array</text><line style="stroke:#000000;stroke-width:1.0;" x1="183" x2="183" y1="10" y2="30.2969"></line><line style="stroke:#000000;stroke-width:1.0;" x1="10" x2="842" y1="30.2969" y2="30.2969"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="163" x="15" y="45.292">metadata(AppData[])</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="196" x="188" y="45.292">Shadow App meta data array</text><line style="stroke:#000000;stroke-width:1.0;" x1="183" x2="183" y1="30.2969" y2="50.5938"></line><line style="stroke:#000000;stroke-width:1.0;" x1="10" x2="842" y1="50.5938" y2="50.5938"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="144" x="15" y="65.5889">timestamp(uint64)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="188" y="65.5889">Shadow doc timestamp</text><line style="stroke:#000000;stroke-width:1.0;" x1="183" x2="183" y1="50.5938" y2="70.8906"></line><line style="stroke:#000000;stroke-width:1.0;" x1="10" x2="842" y1="70.8906" y2="70.8906"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="89" x="15" y="85.8857">from(uint8)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="649" x="188" y="85.8857">Which link the message from, need write back to the response(1, bt; 2, shadow; 3, mqtt topic)</text><line style="stroke:#000000;stroke-width:1.0;" x1="183" x2="183" y1="70.8906" y2="91.1875"></line><line style="stroke:#000000;stroke-width:1.0;" x1="10" x2="842" y1="91.1875" y2="91.1875"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="68" x="15" y="106.1826">to(uint8)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="522" x="188" y="106.1826">To which link the message should report(2, shadow; 3, mqtt topic; 4, cloud)</text><line style="stroke:#000000;stroke-width:1.0;" x1="183" x2="183" y1="91.1875" y2="111.4844"></line><rect fill="none" height="101.4844" rx="5" ry="5" style="stroke:#000000;stroke-width:1.5;" width="832" x="10" y="10"></rect><!--SRC=[TP1BRzim48Jl_1K3dIH02VnGZK2-vE6wW6kZGUqaXw87MjnOR2MI9LSsWg3_lPIBF80al13S_MPckUU1fUTVmHhnA11F8frJacLwuTmitZz-PacPn0VwAgJtyY79_wCjiNpBhckfx06zf0VUqR5kAUQsBksquKdnIgLiXUVs4t_lRNj4pthohjPLZKQRt-2QOaO8SaVeeHo6IE7WDHEsieg4FKAUWhCcK3hCiUKfHZd2CN2ASOxs3tCadQwovn7jI-36ul1-PgXjrwZexgpdz2FJAOeSLMCxbINYhpWdeuuB5zUDD7opMc9FFcXhC3mT3KR5wJYTUuqvRJ6SO30kYq4v-8IhzGPzEnFfb-ibWkryHL0wiDVRZgC-4mkvb_ZUcNw59RuvCelPrwS2FfkzzjQqP5WiRbSlmAGukTICDVau2MvNOaRticiuAYghjDcLkDdCJyx4KffT5tzUWeouij7NFyJU-Xy0]--></g></svg></p>
      </div>
      
      
    
    
    
    
    
    
  
    </body></html>